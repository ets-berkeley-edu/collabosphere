sudo: required
language: node_js
node_js:
  - "4"

addons:
  postgresql: "9.4"

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libcairo2-dev libjpeg8-dev libpango1.0-dev libgif-dev build-essential g++

  - cd $TRAVIS_BUILD_DIR
  - export MOCHA_GREP='Export a whiteboard to a PNG file'

  # Configure postgres
  - psql -c 'create database collabospheretravis;' -U postgres
  - psql collabospheretravis -c 'create extension pg_trgm;' -U postgres

after_install:
  - ls -la node_modules/fabric/node_modules

script:
  - node_modules/.bin/gulp test-travis
